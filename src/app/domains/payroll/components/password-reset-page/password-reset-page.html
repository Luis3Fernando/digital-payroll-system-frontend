<div class="px-8 pb-8">
  <div class="mb-8 border-b border-gray-200 pb-4">
    <h2 class="text-2xl font-semibold text-gray-800">Cambiar Contraseña</h2>
    <p class="text-gray-500 mt-1">
      Modifica tu contraseña de acceso de manera segura. Recuerda que después de actualizarla, te
      recomendamos volver a iniciar sesión.
    </p>
  </div>
  <div class="bg-white rounded-xl border border-gray-200 p-8 max-w-lg mx-auto shadow-sm mt-16">
    <h3 class="text-xl font-bold text-gray-800 mb-6">Datos de Seguridad</h3>
    <form [formGroup]="changePasswordForm" (ngSubmit)="submitChangePassword()">
      <div class="mb-5">
        <label for="current_password" class="block text-sm font-medium text-gray-700 mb-2">
          Contraseña Actual
        </label>
        <input
          id="current_password"
          type="password"
          formControlName="current_password"
          placeholder="Ingresa tu contraseña actual"
          class="w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-blue-500 focus:border-blue-500 outline-none transition duration-150"
          [ngClass]="{
            'border-red-500 ring-red-500':
              changePasswordForm.get('current_password')?.invalid &&
              changePasswordForm.get('current_password')?.touched
          }"
        />
        <div
          *ngIf="
            changePasswordForm.get('current_password')?.invalid &&
            changePasswordForm.get('current_password')?.touched
          "
          class="text-left mt-2 text-sm text-red-600"
        >
          <p *ngIf="changePasswordForm.get('current_password')?.errors?.['required']">
            La contraseña actual es obligatoria.
          </p>
        </div>
      </div>
      <div class="mb-5">
        <label for="new_password" class="block text-sm font-medium text-gray-700 mb-2">
          Nueva Contraseña
        </label>
        <input
          id="new_password"
          type="password"
          formControlName="new_password"
          placeholder="Mínimo 8 caracteres"
          class="w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-blue-500 focus:border-blue-500 outline-none transition duration-150"
          [ngClass]="{
            'border-red-500 ring-red-500':
              changePasswordForm.get('new_password')?.invalid &&
              changePasswordForm.get('new_password')?.touched
          }"
        />
        <div
          *ngIf="
            changePasswordForm.get('new_password')?.invalid &&
            changePasswordForm.get('new_password')?.touched
          "
          class="text-left mt-2 text-sm text-red-600"
        >
          <p *ngIf="changePasswordForm.get('new_password')?.errors?.['required']">
            La nueva contraseña es obligatoria.
          </p>
          <p *ngIf="changePasswordForm.get('new_password')?.errors?.['minlength']">
            Debe tener al menos 8 caracteres.
          </p>
          <p *ngIf="changePasswordForm.get('new_password')?.errors?.['mustMatch']">
            Las contraseñas no coinciden.
          </p>
        </div>
      </div>
      <div class="mb-8">
        <label for="confirm_password" class="block text-sm font-medium text-gray-700 mb-2">
          Confirmar Nueva Contraseña
        </label>
        <input
          id="confirm_password"
          type="password"
          formControlName="confirm_password"
          placeholder="Confirma la nueva contraseña"
          class="w-full border border-gray-300 rounded-lg px-4 py-2.5 focus:ring-blue-500 focus:border-blue-500 outline-none transition duration-150"
          [ngClass]="{
            'border-red-500 ring-red-500':
              changePasswordForm.get('confirm_password')?.invalid &&
              changePasswordForm.get('confirm_password')?.touched
          }"
        />
        <div
          *ngIf="
            changePasswordForm.get('confirm_password')?.invalid &&
            changePasswordForm.get('confirm_password')?.touched
          "
          class="text-left mt-2 text-sm text-red-600"
        >
          <p *ngIf="changePasswordForm.get('confirm_password')?.errors?.['required']">
            Debes confirmar la nueva contraseña.
          </p>
          <p *ngIf="changePasswordForm.get('confirm_password')?.errors?.['mustMatch']">
            Las contraseñas no coinciden.
          </p>
        </div>
      </div>
      <div class="pt-4 border-t border-gray-100">
        <app-loading-button
          [text]="'Cambiar Contraseña'"
          [loading]="isLoadingChange"
          type="submit"
          class="w-full sm:w-auto"
        ></app-loading-button>
      </div>
    </form>
  </div>
</div>
